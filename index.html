<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Test Master</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            --bg-main: #0d1b2a;
            --bg-card: #1b2838;
            --bg-input: #162231;
            --text-white: #ffffff;
            --text-gray: #8899a6;
            --accent-blue: #1d9bf0;
            --accent-cyan: #00d4aa;
            --accent-orange: #f59e0b;
            --accent-yellow: #fbbf24;
            --border-color: #2d4a5e;
        }

        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background: linear-gradient(180deg, #0d1b2a 0%, #1a2d42 100%);
            color: var(--text-white);
            min-height: 100vh;
            padding-bottom: 80px;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 16px;
        }

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            margin-bottom: 16px;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-gray);
            font-size: 15px;
            cursor: pointer;
        }

        .header-left svg {
            width: 20px;
            height: 20px;
        }

        .header-right {
            font-size: 15px;
            color: var(--text-gray);
        }

        /* Search Bar */
        .search-bar {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
        }

        .search-input {
            flex: 1;
            display: flex;
            align-items: center;
            background: var(--bg-input);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 12px 16px;
            gap: 10px;
        }

        .search-input svg {
            width: 18px;
            height: 18px;
            color: var(--text-gray);
            flex-shrink: 0;
        }

        .search-input input {
            flex: 1;
            background: none;
            border: none;
            outline: none;
            color: var(--text-white);
            font-size: 15px;
            font-family: inherit;
        }

        .search-input input::placeholder {
            color: var(--text-gray);
        }

        .hash-btn {
            width: 48px;
            height: 48px;
            background: var(--bg-input);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            color: var(--text-gray);
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .go-btn {
            padding: 12px 20px;
            background: var(--accent-blue);
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            font-family: inherit;
        }

        /* Progress Bar */
        .progress-bar {
            height: 4px;
            background: var(--bg-input);
            border-radius: 2px;
            margin-bottom: 24px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--accent-cyan);
            border-radius: 2px;
            transition: width 0.3s ease;
        }

        /* Question Card */
        .question-card {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 16px;
        }

        .question-header {
            display: flex;
            align-items: flex-start;
            gap: 16px;
            margin-bottom: 20px;
        }

        .question-number {
            width: 36px;
            height: 36px;
            background: var(--accent-cyan);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 16px;
            flex-shrink: 0;
            color: #000;
        }

        .question-text {
            font-size: 18px;
            font-weight: 600;
            line-height: 1.5;
            flex: 1;
        }

        /* Answers */
        .answers {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .answer-item {
            display: flex;
            align-items: center;
            gap: 14px;
            padding: 16px;
            background: var(--bg-input);
            border: 2px solid transparent;
            border-radius: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .answer-item:hover {
            border-color: var(--border-color);
        }

        .answer-item.selected {
            border-color: var(--accent-cyan);
            background: rgba(0, 212, 170, 0.1);
        }

        .answer-item.correct {
            border-color: var(--accent-yellow);
            background: rgba(251, 191, 36, 0.15);
        }

        .answer-item.wrong {
            border-color: #ef4444;
            background: rgba(239, 68, 68, 0.1);
        }

        .answer-letter {
            width: 36px;
            height: 36px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 15px;
            flex-shrink: 0;
        }

        .answer-item.selected .answer-letter {
            background: var(--accent-cyan);
            color: #000;
        }

        .answer-item.correct .answer-letter {
            background: var(--accent-yellow);
            color: #000;
        }

        .answer-item.wrong .answer-letter {
            background: #ef4444;
            color: white;
        }

        .answer-text {
            flex: 1;
            font-size: 15px;
            line-height: 1.5;
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }

        .btn-check {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 14px 24px;
            background: var(--accent-blue);
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            font-family: inherit;
        }

        .btn-show {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 14px 24px;
            background: var(--accent-orange);
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            font-family: inherit;
        }

        /* Correct Answer Box */
        .correct-answer-box {
            background: rgba(0, 212, 170, 0.1);
            border: 1px solid var(--accent-cyan);
            border-radius: 12px;
            padding: 14px 16px;
            margin-top: 16px;
            display: none;
            font-size: 14px;
            line-height: 1.5;
        }

        .correct-answer-box.show {
            display: block;
        }

        .correct-answer-box .label {
            color: var(--accent-cyan);
            font-weight: 600;
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--bg-main);
            border-top: 1px solid var(--border-color);
            padding: 12px 16px;
            padding-bottom: calc(12px + env(safe-area-inset-bottom));
        }

        .nav-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 600px;
            margin: 0 auto;
        }

        .nav-btn {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 12px 20px;
            background: var(--bg-input);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            color: var(--text-gray);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            font-family: inherit;
        }

        .nav-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .nav-btn.primary {
            background: var(--accent-blue);
            border-color: var(--accent-blue);
            color: white;
        }

        .nav-btn-center {
            width: 44px;
            height: 44px;
            background: var(--bg-input);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            color: var(--text-gray);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Question List Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal-overlay.show {
            display: flex;
        }

        .modal-content {
            background: var(--bg-card);
            border-radius: 20px;
            width: 100%;
            max-width: 400px;
            max-height: 70vh;
            overflow: hidden;
        }

        .modal-header {
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 18px;
            font-weight: 600;
        }

        .modal-close {
            width: 32px;
            height: 32px;
            background: var(--bg-input);
            border: none;
            border-radius: 8px;
            color: var(--text-gray);
            cursor: pointer;
            font-size: 18px;
        }

        .modal-body {
            padding: 16px;
            overflow-y: auto;
            max-height: calc(70vh - 80px);
        }

        .question-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
        }

        .q-item {
            aspect-ratio: 1;
            background: var(--bg-input);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .q-item:hover {
            border-color: var(--accent-blue);
        }

        .q-item.current {
            background: var(--accent-blue);
            border-color: var(--accent-blue);
        }

        .q-item.answered {
            background: var(--accent-cyan);
            border-color: var(--accent-cyan);
            color: #000;
        }

        /* Number Input Modal */
        .number-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .number-modal.show {
            display: flex;
        }

        .number-input-box {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 24px;
            width: 100%;
            max-width: 300px;
            text-align: center;
        }

        .number-input-title {
            font-size: 16px;
            margin-bottom: 16px;
            color: var(--text-gray);
        }

        .number-input {
            width: 100%;
            padding: 14px;
            background: var(--bg-input);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            color: white;
            font-size: 24px;
            font-weight: 600;
            text-align: center;
            font-family: inherit;
            margin-bottom: 16px;
        }

        .number-input:focus {
            outline: none;
            border-color: var(--accent-blue);
        }

        .number-btns {
            display: flex;
            gap: 12px;
        }

        .number-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            font-family: inherit;
        }

        .number-btn.cancel {
            background: var(--bg-input);
            color: var(--text-gray);
        }

        .number-btn.confirm {
            background: var(--accent-blue);
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="header-left" onclick="closeApp()">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
                </svg>
                Bosh sahifa
            </div>
            <div class="header-right" id="questionCounter">1 / 10</div>
        </div>

        <!-- Search Bar -->
        <div class="search-bar">
            <div class="search-input">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                </svg>
                <input type="text" placeholder="Savol qidirish..." id="searchInput" onkeypress="handleSearch(event)">
            </div>
            <button class="hash-btn" onclick="showNumberModal()">#</button>
            <button class="go-btn" onclick="goToQuestion()">O'tish</button>
        </div>

        <!-- Progress Bar -->
        <div class="progress-bar">
            <div class="progress-fill" id="progressBar" style="width: 10%"></div>
        </div>

        <!-- Question Card -->
        <div class="question-card">
            <div class="question-header">
                <div class="question-number" id="qNumber">1</div>
                <div class="question-text" id="qText">Savol matni</div>
            </div>

            <div class="answers" id="answersList"></div>

            <div class="action-buttons">
                <button class="btn-check" onclick="checkAnswer()">
                    <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                    </svg>
                    Tekshirish
                </button>
                <button class="btn-show" onclick="toggleAnswer()">
                    <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                    </svg>
                    <span id="showBtnText">Javobni ko'rish</span>
                </button>
            </div>

            <div class="correct-answer-box" id="correctBox">
                <span class="label">To'g'ri javob:</span> <span id="correctLetter">A</span> - <span id="correctText"></span>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <div class="bottom-nav">
        <div class="nav-row">
            <button class="nav-btn" id="prevBtn" onclick="prevQuestion()">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                </svg>
                Oldingi
            </button>
            <button class="nav-btn-center" onclick="showQuestionList()">
                <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"/>
                </svg>
            </button>
            <button class="nav-btn primary" onclick="nextQuestion()">
                Keyingi
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                </svg>
            </button>
        </div>
    </div>

    <!-- Question List Modal -->
    <div class="modal-overlay" id="questionModal" onclick="hideQuestionList()">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="modal-header">
                <div class="modal-title">Savollar ro'yxati</div>
                <button class="modal-close" onclick="hideQuestionList()">âœ•</button>
            </div>
            <div class="modal-body">
                <div class="question-grid" id="questionGrid"></div>
            </div>
        </div>
    </div>

    <!-- Number Input Modal -->
    <div class="number-modal" id="numberModal" onclick="hideNumberModal()">
        <div class="number-input-box" onclick="event.stopPropagation()">
            <div class="number-input-title">Savol raqamini kiriting</div>
            <input type="number" class="number-input" id="numberInput" min="1" placeholder="1" onkeypress="handleNumberEnter(event)">
            <div class="number-btns">
                <button class="number-btn cancel" onclick="hideNumberModal()">Bekor</button>
                <button class="number-btn confirm" onclick="goToNumberInput()">O'tish</button>
            </div>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.ready();

        let questions = [];
        let currentIndex = 0;
        let selectedAnswer = null;
        let answerShown = false;
        let answeredQuestions = new Set();

        function init() {
            questions = getQuestions();
            buildQuestionGrid();
            renderQuestion();
        }

        function getQuestions() {
            return [
                { question: "Spiralli modelda har bir iteratsiya nima sifatida tasvirlanadi?", answers: ["Spiralli modelda har bir iteratsiya ishlab chiqishning tahliliy tsikli sifatida tasvirlanadi", "Spiralli modelda har bir iteratsiya ishlab chiqishning oraliq tsikli sifatida tasvirlanadi", "Spiralli modelda har bir iteratsiya ishlab chiqishning tugatilgan tsikli sifatida tasvirlanadi", "Spiralli modelda har bir iteratsiya ishlab chiqishning sintez tsikli sifatida tasvirlanadi"], correct_index: 2 },
                { question: "Dasturiy ta'minot arxitekturasi nima?", answers: ["Dastur kodi", "Tizim tuzilmasi va komponentlar orasidagi munosabatlar", "Foydalanuvchi interfeysi", "Ma'lumotlar bazasi"], correct_index: 1 },
                { question: "Agile metodologiyasining asosiy tamoyili nima?", answers: ["Batafsil hujjatlashtirish", "Mijoz bilan hamkorlik va o'zgarishlarga moslashuvchanlik", "Qat'iy rejalashtirish", "Uzun rivojlanish tsikllari"], correct_index: 1 },
                { question: "Unit testing nima?", answers: ["Butun tizimni sinash", "Alohida modullarni yoki funksiyalarni sinash", "Foydalanuvchi interfeysini sinash", "Ma'lumotlar bazasini sinash"], correct_index: 1 },
                { question: "Git nima uchun ishlatiladi?", answers: ["Kod yozish uchun", "Versiyalarni boshqarish va kod tarixini saqlash", "Dasturni ishga tushirish", "Ma'lumotlarni saqlash"], correct_index: 1 },
                { question: "REST API nima?", answers: ["Dasturlash tili", "HTTP protokoli asosida ishlaydigan veb xizmatlar arxitekturasi", "Ma'lumotlar bazasi", "Operatsion tizim"], correct_index: 1 },
                { question: "SQL injection nima?", answers: ["Ma'lumotlar bazasi turi", "Zararli SQL kodini kiritish orqali xavfsizlik zaifligidan foydalanish", "Dasturlash usuli", "Test turi"], correct_index: 1 },
                { question: "Scrum metodologiyasida Sprint nima?", answers: ["Doimiy jarayon", "1-4 haftalik vaqt chegaralangan iteratsiya", "Hujjat turi", "Test bosqichi"], correct_index: 1 },
                { question: "Docker nima uchun ishlatiladi?", answers: ["Kod yozish uchun", "Ilovalarni konteynerlashtirish va portativ qilish", "Ma'lumotlar bazasi", "Tarmoq sozlash"], correct_index: 1 },
                { question: "CI/CD nima?", answers: ["Dasturlash tili", "Uzluksiz integratsiya va uzluksiz yetkazib berish", "Ma'lumotlar bazasi", "Xavfsizlik tizimi"], correct_index: 1 }
            ];
        }

        function buildQuestionGrid() {
            const grid = document.getElementById('questionGrid');
            grid.innerHTML = '';
            questions.forEach((_, i) => {
                const item = document.createElement('div');
                item.className = 'q-item';
                if (i === currentIndex) item.classList.add('current');
                if (answeredQuestions.has(i)) item.classList.add('answered');
                item.textContent = i + 1;
                item.onclick = () => goToIndex(i);
                grid.appendChild(item);
            });
        }

        function renderQuestion() {
            const q = questions[currentIndex];
            
            document.getElementById('questionCounter').textContent = `${currentIndex + 1} / ${questions.length}`;
            document.getElementById('qNumber').textContent = currentIndex + 1;
            document.getElementById('qText').textContent = q.question;
            
            const progress = ((currentIndex + 1) / questions.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            
            selectedAnswer = null;
            answerShown = false;
            document.getElementById('correctBox').classList.remove('show');
            document.getElementById('showBtnText').textContent = "Javobni ko'rish";
            
            const list = document.getElementById('answersList');
            list.innerHTML = '';
            
            q.answers.forEach((ans, i) => {
                const div = document.createElement('div');
                div.className = 'answer-item';
                div.innerHTML = `
                    <div class="answer-letter">${String.fromCharCode(65 + i)}</div>
                    <div class="answer-text">${ans}</div>
                `;
                div.onclick = () => selectAnswer(i);
                list.appendChild(div);
            });
            
            document.getElementById('prevBtn').disabled = currentIndex === 0;
            buildQuestionGrid();
        }

        function selectAnswer(index) {
            if (answerShown) return;
            
            selectedAnswer = index;
            const items = document.querySelectorAll('.answer-item');
            items.forEach((item, i) => {
                item.classList.remove('selected', 'correct', 'wrong');
                if (i === index) item.classList.add('selected');
            });
        }

        function checkAnswer() {
            if (selectedAnswer === null) {
                try { tg.showAlert('Javobni tanlang!'); } catch(e) { alert('Javobni tanlang!'); }
                return;
            }
            
            const q = questions[currentIndex];
            const items = document.querySelectorAll('.answer-item');
            
            items.forEach((item, i) => {
                item.classList.remove('selected');
                if (i === q.correct_index) {
                    item.classList.add('correct');
                } else if (i === selectedAnswer) {
                    item.classList.add('wrong');
                }
            });
            
            answerShown = true;
            answeredQuestions.add(currentIndex);
            showCorrectBox();
            
            try {
                if (selectedAnswer === q.correct_index) {
                    tg.HapticFeedback.notificationOccurred('success');
                } else {
                    tg.HapticFeedback.notificationOccurred('error');
                }
            } catch(e) {}
        }

        function toggleAnswer() {
            const q = questions[currentIndex];
            
            if (answerShown) {
                answerShown = false;
                document.getElementById('correctBox').classList.remove('show');
                document.getElementById('showBtnText').textContent = "Javobni ko'rish";
                
                const items = document.querySelectorAll('.answer-item');
                items.forEach((item, i) => {
                    item.classList.remove('correct', 'wrong');
                    if (i === selectedAnswer) item.classList.add('selected');
                });
            } else {
                const items = document.querySelectorAll('.answer-item');
                items.forEach((item, i) => {
                    item.classList.remove('selected');
                    if (i === q.correct_index) {
                        item.classList.add('correct');
                    }
                });
                
                answerShown = true;
                showCorrectBox();
            }
        }

        function showCorrectBox() {
            const q = questions[currentIndex];
            const letter = String.fromCharCode(65 + q.correct_index);
            document.getElementById('correctLetter').textContent = letter;
            document.getElementById('correctText').textContent = q.answers[q.correct_index];
            document.getElementById('correctBox').classList.add('show');
            document.getElementById('showBtnText').textContent = "Yashirish";
        }

        function nextQuestion() {
            if (currentIndex < questions.length - 1) {
                currentIndex++;
                renderQuestion();
            }
        }

        function prevQuestion() {
            if (currentIndex > 0) {
                currentIndex--;
                renderQuestion();
            }
        }

        function goToIndex(index) {
            currentIndex = index;
            renderQuestion();
            hideQuestionList();
        }

        function showQuestionList() {
            document.getElementById('questionModal').classList.add('show');
        }

        function hideQuestionList() {
            document.getElementById('questionModal').classList.remove('show');
        }

        function showNumberModal() {
            document.getElementById('numberModal').classList.add('show');
            document.getElementById('numberInput').value = '';
            setTimeout(() => document.getElementById('numberInput').focus(), 100);
        }

        function hideNumberModal() {
            document.getElementById('numberModal').classList.remove('show');
        }

        function goToNumberInput() {
            const num = parseInt(document.getElementById('numberInput').value);
            if (num >= 1 && num <= questions.length) {
                currentIndex = num - 1;
                renderQuestion();
                hideNumberModal();
            } else {
                try { tg.showAlert(`1 dan ${questions.length} gacha raqam kiriting`); } 
                catch(e) { alert(`1 dan ${questions.length} gacha raqam kiriting`); }
            }
        }

        function handleNumberEnter(e) {
            if (e.key === 'Enter') goToNumberInput();
        }

        function goToQuestion() {
            const search = document.getElementById('searchInput').value.trim();
            const num = parseInt(search);
            if (num >= 1 && num <= questions.length) {
                currentIndex = num - 1;
                renderQuestion();
                document.getElementById('searchInput').value = '';
            } else if (search) {
                const index = questions.findIndex(q => 
                    q.question.toLowerCase().includes(search.toLowerCase())
                );
                if (index !== -1) {
                    currentIndex = index;
                    renderQuestion();
                    document.getElementById('searchInput').value = '';
                }
            }
        }

        function handleSearch(e) {
            if (e.key === 'Enter') goToQuestion();
        }

        function closeApp() {
            try { tg.close(); } catch(e) {}
        }

        init();
    </script>
</body>
</html>
